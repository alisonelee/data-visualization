<!doctype html>
<html>
<head>
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
   <script src="https://code.highcharts.com/highcharts.js"></script>
</head>
<body>
<div id="container" style="width: 100%; margin: 0 auto"></div>
<script language="JavaScript">

// ---------------------------------- C h a n g e s  s t a r t  h e r e --------------------------------------------//
var driver1 = "Worker Pay and Benefits";
var driver2 = "Worker Treatment";
var driver3 = "Leadership & Ethics";
var driver4 = "Customer Treatment";
var driver5 = "Product Attributes";
var driver6 = "Domestic Job Creation";
var driver7 = "Environmental Impact";
var driver8 = "Supply Chain Impact";
var driver9 = "Investor Alignment";
var driver10 = "Community Wellbeing";

var driver1Weight = 24.56;
var driver2Weight = 24.03;
var driver3Weight = 17.21;
var driver4Weight = 7.43;
var driver5Weight = 5.64;
var driver6Weight = 5.57;
var driver7Weight = 4.98;
var driver8Weight = 4.08;
var driver9Weight = 3.92;
var driver10Weight = 1.69;

var driver1Link = "https://justcapital.com/driver/worker-pay-and-benefits/";
var driver2Link = "https://justcapital.com/driver/worker-treatment/";
var driver3Link = "https://justcapital.com/driver/leadership-and-ethics/";
var driver4Link = "https://justcapital.com/driver/customer-treatment/";
var driver5Link = "https://justcapital.com/driver/product-attributes/";
var driver6Link = "https://justcapital.com/driver/domestic-job-creation/";
var driver7Link = "https://justcapital.com/driver/environmental-impact/";
var driver8Link = "https://justcapital.com/driver/supply-chain-impact/";
var driver9Link = "https://justcapital.com/driver/investor-alignment/";
var driver10Link = "https://justcapital.com/driver/community-well-being/";
// ---------------------------------- C h a n g e s  e n d  h e r e --------------------------------------------//

/**
* Returns the driver's variable name.
*/
function getVarName(driver) {
  if (driver === driver1)
    return "driver1";
  else if (driver === driver2)
    return "driver2";
  else if (driver === driver3)
    return "driver3";
  else if (driver === driver4)
    return "driver4";
  else if (driver === driver5)
    return "driver5";
  else if (driver === driver6)
    return "driver6";
  else if (driver === driver7)
    return "driver7";
  else if (driver === driver8)
    return "driver8";
  else if (driver === driver9)
    return "driver9";
  else if (driver === driver10)
    return "driver10";
}

/**
* Returns the driver's link.
*/
function getLink(driverLink) {
  if (driverLink === "driver1Link")
    return driver1Link;
  else if (driverLink === "driver2Link")
    return driver2Link;
  else if (driverLink === "driver3Link")
    return driver3Link;
  else if (driverLink === "driver4Link")
    return driver4Link;
  else if (driverLink === "driver5Link")
    return driver5Link;
  else if (driverLink === "driver6Link")
    return driver6Link;
  else if (driverLink === "driver7Link")
    return driver7Link;
  else if (driverLink === "driver8Link")
      return driver8Link;
  else if (driverLink === "driver9Link")
    return driver9Link;
  else if (driverLink === "driver10Link")
    return driver10Link;
}

$(document).ready(function() {
   var chart = {
      type: 'bar'
   };
   var title = {
      text: 'Drivers'
   };
   var subtitle = {
      text: '2016 Weights'
   };
   var xAxis = {
      categories: [driver1, driver2, driver3, driver4, driver5,
                   driver6, driver7, driver8, driver9, driver10],
      title: {
         text: null
      }
   };
   var yAxis = {
      min: 0,
      title: {
         text: 'Importance',
         align: 'middle'
      },
      labels: {
         overflow: 'justify'
      }
   };
   var tooltip = {
      valueSuffix: '%'
   };
   var plotOptions = {
      bar: {
         dataLabels: {
            enabled: true
         }
      },
      series: {
        cursor: 'pointer',
        point: {
          events: {
            click: function() {
              var link = getLink(getVarName(this.category) + "Link");
              window.location.href = link;
            }
          }
        }
      }
   };
   var legend = {
      layout: 'vertical',
      align: 'right',
      verticalAlign: 'top',
      x: -5,
      y: 500, // 300
      floating: true,
      borderWidth: 1,
      backgroundColor: ((Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF'),
      shadow: true
   };
   var credits = {
      enabled: false
   };

   var series= [{
         name: '2016',
            data: [driver1Weight, driver2Weight, driver3Weight, driver4Weight,driver5Weight,
                   driver6Weight,driver7Weight,driver8Weight, driver9Weight, driver10Weight]
          }
   ];

   var json = {};
   json.chart = chart;
   json.title = title;
   json.subtitle = subtitle;
   json.tooltip = tooltip;
   json.xAxis = xAxis;
   json.yAxis = yAxis;
   json.series = series;
   json.plotOptions = plotOptions;
   json.legend = legend;
   json.credits = credits;
   $('#container').highcharts(json);
});
</script>
</body>
</html>
